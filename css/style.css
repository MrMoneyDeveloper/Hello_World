:root{color-scheme:dark light}
html[data-theme="dark"]{--bg:#0a111b;--text:#e6eef7;--muted:#a9b3c1;--panel:rgba(255,255,255,.06);--panel-br:rgba(255,255,255,.18);--accent:#5ecbff;--sk-bg:rgba(255,255,255,.06)}
html[data-theme="light"]{--bg:#f6f8fb;--text:#0a1220;--muted:#3d4756;--panel:rgba(0,0,0,.04);--panel-br:rgba(0,0,0,.12);--accent:#2563eb;--sk-bg:rgba(0,0,0,.07)}
*{box-sizing:border-box}html{font-size:16px}body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,sans-serif;background:radial-gradient(1200px 600px at 10% -10%,#0f1c2d 0%,transparent 60%),radial-gradient(1200px 600px at 90% -10%,#11263d 0%,transparent 60%),var(--bg);color:var(--text);line-height:1.5}
.skip-link{position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden}
.skip-link:focus{left:1rem;top:1rem;width:auto;height:auto;padding:.5rem .75rem;background:#111;color:#fff;z-index:1000}
.site-header{display:flex;align-items:flex-end;justify-content:space-between;gap:1rem;padding:1.25rem 1rem 0;max-width:1200px;margin:0 auto}
.header-actions{display:flex;align-items:center;gap:.75rem}
.title{margin:0;font-size:1.8rem}
.sub{margin:.1rem 0 0;color:var(--muted)}
.toggle{appearance:none;border:1px solid var(--panel-br);background:var(--panel);color:var(--text);padding:.45rem .7rem;border-radius:.6rem;backdrop-filter:blur(10px) saturate(120%);cursor:pointer}
.toggle:focus-visible{outline:2px solid var(--accent);outline-offset:2px}
.hero .media-wrap{position:relative;max-width:1200px;margin:1rem auto;border-radius:1rem;overflow:hidden;border:1px solid var(--panel-br);background:var(--panel);box-shadow:0 10px 30px rgba(0,0,0,.25)}
.hero-media,.hero-fallback{width:100%;height:360px;object-fit:cover;display:block}
.hero-fallback{display:none}
.overlay{position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,.35),rgba(0,0,0,.55))}
.overlay-contents{position:absolute;left:1rem;right:1rem;bottom:1rem;display:flex;flex-direction:column;gap:.5rem}
.tagline{color:#fff;font-weight:600;font-size:1.25rem;text-shadow:0 2px 8px rgba(0,0,0,.7);transform:translateY(var(--parY,0px));transition:transform .2s ease-out}
.relates-row{display:flex;gap:.5rem;flex-wrap:wrap}
.badge{display:inline-flex;align-items:center;gap:.4rem;padding:.25rem .6rem;border-radius:999px;background:var(--panel);border:1px solid var(--panel-br);backdrop-filter:blur(8px) saturate(120%);color:var(--text)}
.small{font-size:.82rem;color:var(--muted)}
.spacer{flex:1}
.grid{max-width:1200px;margin:0 auto 3rem;display:grid;gap:1rem;padding:0 1rem;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
.card{position:relative;border:1px solid var(--panel-br);background:var(--panel);backdrop-filter:blur(12px) saturate(130%);border-radius:1rem;overflow:hidden;min-height:140px;box-shadow:0 6px 20px rgba(0,0,0,.2);isolation:isolate}
.card::before{content:"";position:absolute;inset:-2px;background:conic-gradient(from 210deg at 15% 10%, rgba(125,211,252,.12), transparent 30%, rgba(186,230,253,.10) 55%, transparent 80%);filter:blur(12px);opacity:.6;z-index:0;pointer-events:none}
.card>*{position:relative;z-index:1}
.card header{padding:.85rem 1rem .25rem}
.card h3{margin:0;font-size:1.05rem}
.card .content{padding:.25rem 1rem 1rem}
.list{list-style:none;margin:.3rem 0 0;padding:0}
.list li{margin:.35rem 0}
.media{width:100%;height:auto;border-radius:.5rem}
.media-wrap{position:relative}
.caption{margin-top:.4rem;color:var(--muted)}
/* small error helper */
.error{color:var(--muted)}
/* Climate media framing */
.media-frame{position:relative;border-radius:.75rem;border:1px solid var(--panel-br);overflow:hidden;background:#000}
.media-frame img,.media-frame video{display:block;width:100%;height:auto}
.expand{margin-top:.5rem}
.expand summary{cursor:pointer;user-select:none;list-style:none}
.expand summary::-webkit-details-marker{display:none}
.expand summary{display:inline-block;padding:.25rem .5rem;border-radius:.5rem;border:1px solid var(--panel-br);background:var(--panel)}
@keyframes pulse{0%{opacity:.6}50%{opacity:1}100%{opacity:.6}}
.skeleton-line,.skeleton-thumb{border-radius:.5rem;background:var(--sk-bg);animation:pulse 1.15s ease-in-out infinite}
.skeleton-line{height:12px;margin:.55rem 0}
.skeleton-line.short{width:50%}
.skeleton-thumb{height:120px;margin:.5rem 0}
@media (prefers-reduced-motion: reduce){.skeleton-line,.skeleton-thumb{animation:none}}
.skeleton{position:relative}
.skeleton::after{content:"";position:absolute;right:1rem;top:.5rem;width:16px;height:16px;border-radius:999px;border:2px solid rgba(255,255,255,.35);border-top-color:transparent;animation:spin .9s linear infinite}
@keyframes spin{to{transform:rotate(1turn)}}
.card.hydrated{animation:fadein .25s ease-out}
@keyframes fadein{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:none}}
.noscript{max-width:1200px;margin:1rem auto;padding:1rem;color:#000;background:#fff}
*:focus-visible{outline:2px solid var(--accent);outline-offset:2px}
@media (min-width:1100px){.hero-media,.hero-fallback{height:420px}.title{font-size:2rem}}

/* Sphere nav — 360° selector */
.sphere-nav{position:relative;max-width:1200px;margin:.5rem auto 1rem;padding:0 1rem}
.sphere-nav .starfield{z-index:0}
.sphere{position:relative;height:280px;display:grid;place-items:center;perspective:1000px;transform-style:preserve-3d}
.sphere::before{content:"";position:absolute;inset:10% 20%;border-radius:50%;background:radial-gradient(60% 60% at 50% 50%,rgba(80,160,220,.15),transparent 60%);filter:blur(10px);z-index:0}
.sphere{--r:240px;--rotX:-12deg;--rotY:0deg}
.sphere .node{position:absolute;display:grid;place-items:center;width:64px;height:64px;border-radius:50%;color:#fff;background:radial-gradient(120% 120% at 30% 30%,#e6f6ff 0%,#7ec8ff 20%,#3a76b7 45%,#17304f 70%);box-shadow:0 0 0 1px rgba(132,181,222,.4),0 0 22px rgba(94,203,255,.35);border:none;cursor:pointer}
.sphere .node:focus-visible{outline:2px solid #5ecbff;outline-offset:3px}
.sphere .node{transform-style:preserve-3d}
.sphere{transform:rotateX(var(--rotX)) rotateY(var(--rotY))}
@media (prefers-reduced-motion: reduce){.sphere{transform:none}}

/* Panel overlay */
.panel{position:fixed;inset:0;display:flex;align-items:flex-start;justify-content:center;background:rgba(2,8,16,.55);backdrop-filter:blur(10px);z-index:1000;opacity:0;pointer-events:none;transition:opacity .25s ease}
.panel:not(.hidden){opacity:1;pointer-events:auto}
.panel .panel-inner{margin-top:6vh;width:min(720px,92vw)}
.panel .panel-close{position:absolute;right:calc(50% - min(360px,46vw));top:3.5vh;border:1px solid var(--panel-br);background:var(--panel);color:var(--text);border-radius:.6rem;padding:.35rem .6rem;cursor:pointer}
.panel .panel-card{animation:drop .25s ease both}
@keyframes drop{from{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:none}}

/* Hide legacy orbit if present */
.orbit-nav{display:none}

/* Starfield */
.starfield{position:absolute;inset:0;border-radius:12px;pointer-events:none;z-index:0;opacity:.6;filter:drop-shadow(0 0 2px rgba(255,255,255,.2));background:
  radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.7) 0, transparent 2px),
  radial-gradient(1px 1px at 70% 80%, rgba(255,255,255,.5) 0, transparent 1px),
  radial-gradient(1.5px 1.5px at 40% 60%, rgba(255,255,255,.6) 0, transparent 1.5px);
background-size:800px 400px,600px 300px,1000px 500px;background-repeat:repeat;transform:translate(var(--sfX,0),var(--sfY,0))}

/* Levels (progress rings) */
@property --p { syntax: '<number>'; inherits: false; initial-value: 0; }
.levels{max-width:1200px;margin:0 auto 1rem;padding:0 1rem}
.levels-wrap{display:flex;flex-wrap:wrap;gap:.75rem}
.level{--p:0;--size:76px;position:relative;display:inline-grid;place-items:center;width:var(--size);height:var(--size);border-radius:50%;text-decoration:none;color:var(--text);background:
  conic-gradient(var(--accent) calc(var(--p)*360deg), var(--panel-br) 0);
  -webkit-mask:radial-gradient(farthest-side, transparent calc(50% - 8px), #000 calc(50% - 7px));
          mask:radial-gradient(farthest-side, transparent calc(50% - 8px), #000 calc(50% - 7px));
  transition: --p .9s ease-out, box-shadow .2s ease;
  box-shadow:0 0 0 1px var(--panel-br), inset 0 0 30px rgba(125,211,252,.08)}
.level span{font-size:.75rem;text-align:center;max-width:90%}
.level:focus-visible{outline:2px solid var(--accent);outline-offset:4px}
.level[aria-busy="true"]{opacity:.7}

/* Sci‑fi loading overlay */
.loader-overlay{position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:radial-gradient(1200px 600px at 10% -10%,#0b1a2a 0%,transparent 60%),#05070b;color:#cde;z-index:9999;transition:opacity .4s ease;}
.loader-overlay.hidden{opacity:0;pointer-events:none}
.warp{width:96px;height:96px;border-radius:50%;border:2px solid rgba(125,211,252,.4);position:relative;box-shadow:0 0 24px rgba(125,211,252,.25) inset,0 0 24px rgba(125,211,252,.25)}
.warp::before,.warp::after{content:"";position:absolute;inset:0;border-radius:50%;border:2px dashed rgba(125,211,252,.35)}
.warp::before{animation:warpSpin 1.6s linear infinite}
.warp::after{animation:warpSpin 2.4s linear infinite reverse}
.warp .core{position:absolute;left:50%;top:50%;width:10px;height:10px;margin:-5px 0 0 -5px;border-radius:50%;background:#7dd3fc;filter:drop-shadow(0 0 8px #7dd3fc)}
.loading-text{margin-top:1rem;font-weight:600;letter-spacing:.02em}
@keyframes warpSpin{to{transform:rotate(1turn)}}
