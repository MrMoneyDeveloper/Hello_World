<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="dark light" />
    <title>World Pulse</title>
    <!-- Resource hints -->
    <link rel="preconnect" href="https://hn.algolia.com" crossorigin>
    <link rel="preconnect" href="https://api.exchangerate.host" crossorigin>
    <link rel="preconnect" href="https://api.open-meteo.com" crossorigin>
    <link rel="preconnect" href="https://air-quality-api.open-meteo.com" crossorigin>
    <link rel="preconnect" href="https://api.nasa.gov" crossorigin>
    <link rel="preconnect" href="https://api.pexels.com" crossorigin>
    <link rel="dns-prefetch" href="//hn.algolia.com">
    <link rel="dns-prefetch" href="//api.exchangerate.host">
    <link rel="dns-prefetch" href="//api.open-meteo.com">
    <link rel="dns-prefetch" href="//air-quality-api.open-meteo.com">
    <link rel="dns-prefetch" href="//api.nasa.gov">
    <link rel="dns-prefetch" href="//api.pexels.com">
    <link rel="preload" as="image" href="assets/hero.jpg">
    <link rel="preload" as="video" href="assets/hero.mp4" type="video/mp4">
    <!-- Preload main modules to reduce waterfall -->
    <link rel="modulepreload" href="js/app.js">
    <link rel="modulepreload" href="js/utils.js">
    <link rel="modulepreload" href="js/hero-init.js">
    <link rel="stylesheet" href="css/style.css" />
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js" defer></script>
  </head>
  <body class="theme-dark">
    <div id="intro-overlay" class="intro-overlay">
      <video id="introVideo" autoplay muted playsinline preload="metadata" class="intro-video" poster="assets/hero.jpg">
        <source src="assets/Vids/intro_globe.mp4" type="video/mp4">
      </video>
      <button id="skipIntro" class="intro-skip">Skip</button>
    </div>
    <div id="loader" class="loader-overlay" aria-hidden="true">
      <div class="warp">
        <div class="core"></div>
      </div>
      <div class="loading-text">Initializing world‚Ä¶</div>
    </div>
    <a class="skip-link" href="#content">Skip to content</a>
    <header class="site-header">
      <div class="brand">
        <h1 class="title">World Pulse</h1>
        <p class="sub">Welcome‚Äîlet‚Äôs surface what relates to you today.</p>
      </div>
      <div class="header-actions">
        <span class="small" id="updatedHeader">Updated <time id="updatedTime"></time></span>
        <button id="themeToggle" class="toggle" aria-pressed="false" title="Toggle light/dark">Light</button>
      </div>
    </header>

    <section class="hero">
      <div class="media-wrap">
        <video id="hero" class="hero-media" src="assets/hero.mp4" muted autoplay loop playsinline poster="assets/hero.jpg"></video>
        <img id="poster" class="hero-fallback" src="assets/hero.jpg" alt="Abstract ambient motion" />
        <div class="overlay"></div>
        <div class="overlay-contents">
          <div class="tagline">Signals, not noise.</div>
          <div id="relates" aria-live="polite" class="relates-row">
            <span class="badge">‚Ä¶loading</span>
            <span class="badge">‚Ä¶loading</span>
            <span class="badge">‚Ä¶loading</span>
            <span class="badge">‚Ä¶loading</span>
          </div>
        </div>
      </div>
    </section>

    <nav class="orbit-nav" aria-label="Quick sections">
      <div class="starfield" aria-hidden="true"></div>
      <div class="orbit-wrap" id="orbit">
        <a class="orb" href="#card-crypto" aria-label="Crypto"><span>‚Çø</span></a>
        <a class="orb" href="#card-fx" aria-label="FX"><span>FX</span></a>
        <a class="orb" href="#card-weather" aria-label="Weather"><span>‚òÅ</span></a>
        <a class="orb" href="#card-apod" aria-label="NASA APOD"><span>üõ∞</span></a>
        <a class="orb" href="#card-news" aria-label="Tech Headlines"><span>HN</span></a>
        <a class="orb" href="#card-aq" aria-label="Air Quality"><span>AQ</span></a>
        <a class="orb" href="#card-climate" aria-label="Climate"><span>üåç</span></a>
        <a class="orb" href="#card-about" aria-label="Welcome"><span>‚ìò</span></a>
      </div>
    </nav>

    <nav class="sphere-nav" aria-label="World sphere">
      <div class="starfield" aria-hidden="true"></div>
      <div id="sphere" class="sphere" aria-live="polite">
        <button class="node" data-widget="crypto" aria-label="Crypto">‚Çø</button>
        <button class="node" data-widget="fx" aria-label="FX">FX</button>
        <button class="node" data-widget="weather" aria-label="Weather">‚òÅ</button>
        <button class="node" data-widget="apod" aria-label="NASA APOD">üõ∞</button>
        <button class="node" data-widget="news" aria-label="Tech Headlines">HN</button>
        <button class="node" data-widget="aq" aria-label="Air Quality">AQ</button>
        <button class="node" data-widget="climate" aria-label="Climate">üåç</button>
        <button class="node" data-widget="about" aria-label="Welcome">‚ìò</button>
      </div>
    </nav>

    <div id="panel" class="panel hidden" role="dialog" aria-modal="true" aria-labelledby="panel-title">
      <div class="panel-inner">
        <button class="panel-close" aria-label="Close">√ó</button>
        <section class="card panel-card" aria-busy="true">
          <header><h3 id="panel-title">Loading‚Ä¶</h3></header>
          <div class="content skeleton"></div>
        </section>
      </div>
    </div>

    <section class="levels" aria-label="Levels">
      <div class="levels-wrap">
        <a href="#card-crypto" class="level" data-level="crypto"><span>Crypto</span></a>
        <a href="#card-fx" class="level" data-level="fx"><span>FX</span></a>
        <a href="#card-weather" class="level" data-level="weather"><span>Weather</span></a>
        <a href="#card-apod" class="level" data-level="apod"><span>APOD</span></a>
        <a href="#card-news" class="level" data-level="news"><span>Tech</span></a>
        <a href="#card-aq" class="level" data-level="aq"><span>AQ</span></a>
        <a href="#card-climate" class="level" data-level="climate"><span>Climate</span></a>
        <a href="#card-about" class="level" data-level="about"><span>Welcome</span></a>
      </div>
    </section>

    <main id="content" class="grid" aria-live="polite">
      <section id="card-crypto" class="card" data-widget="crypto" aria-busy="true">
        <header><h3>Crypto</h3></header>
        <div class="content skeleton">
          <div class="skeleton-line"></div>
          <div class="skeleton-line short"></div>
        </div>
      </section>

      <section id="card-fx" class="card" data-widget="fx" aria-busy="true">
        <header><h3>FX</h3></header>
        <div class="content skeleton">
          <div class="skeleton-line"></div>
          <div class="skeleton-line short"></div>
        </div>
      </section>

      <section id="card-weather" class="card" data-widget="weather" aria-busy="true">
        <header><h3>Weather</h3></header>
        <div class="content skeleton">
          <div class="skeleton-line"></div>
          <div class="skeleton-line"></div>
        </div>
      </section>

      <section id="card-apod" class="card" data-widget="apod" aria-busy="true">
        <header><h3>NASA APOD</h3></header>
        <div class="content skeleton">
          <div class="skeleton-thumb"></div>
          <div class="skeleton-line short"></div>
        </div>
      </section>

      <section id="card-news" class="card" data-widget="news" aria-busy="true">
        <header><h3>Tech Headlines</h3></header>
        <div class="content skeleton">
          <div class="skeleton-line"></div>
          <div class="skeleton-line"></div>
          <div class="skeleton-line short"></div>
        </div>
      </section>

      <section id="card-aq" class="card" data-widget="aq" aria-busy="true">
        <header><h3>Air Quality</h3></header>
        <div class="content skeleton">
          <div class="skeleton-line"></div>
          <div class="skeleton-line short"></div>
        </div>
      </section>

      <section id="card-climate" class="card" data-widget="climate" aria-busy="true">
        <header><h3>Climate Placeholder</h3></header>
        <div class="content skeleton">
          <div class="skeleton-thumb"></div>
          <div class="skeleton-line short"></div>
        </div>
      </section>

      <section id="card-about" class="card" data-widget="about" aria-busy="true">
        <header><h3>Welcome</h3></header>
        <div class="content skeleton">
          <div class="skeleton-line"></div>
          <div class="skeleton-line short"></div>
        </div>
      </section>
    </main>

    <noscript>
      <div class="noscript">Enable JavaScript to hydrate live data.</div>
    </noscript>

    <script type="module" src="js/app.js"></script>
    <script type="module" src="js/hero-init.js"></script>
    <script type="module" src="js/intro.js"></script>
    <script>if('serviceWorker' in navigator){window.addEventListener('load',()=>navigator.serviceWorker.register('sw.js').catch(()=>{}));}</script>
  </body>
  </html>
